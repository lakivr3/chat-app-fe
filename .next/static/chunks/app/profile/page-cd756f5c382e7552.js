(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1226:()=>{},8297:(e,s,a)=>{Promise.resolve().then(a.bind(a,1816))},1816:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var l=a(5155),t=a(8162),c=a(6046),r=a(2115);let n=(0,a(4057).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var i=a(2472),o=a(5548);let d=()=>{var e;let{isCheckingAuth:s,authUser:a,checkAuth:d,isUpdatingProfile:u,updateProfile:h,onlineUsers:p}=(0,r.useContext)(t.F),[x,m]=(0,r.useState)();a||(0,c.redirect)("/login");let y=async e=>{let s=e.target.files[0];if(!s)return;let a=new FileReader;a.readAsDataURL(s),a.onload=async()=>{let e=a.result;m(e),await h({profilePic:e})}};return(0,l.jsx)("div",{className:"h-screen pt-20",children:(0,l.jsx)("div",{className:"max-w-2xl mx-auto p-4 py-8",children:(0,l.jsxs)("div",{className:"bg-base-300 rounded-xl p-6 space-y-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Profile"}),(0,l.jsx)("p",{className:"mt-2",children:"Your profille information"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:x||a.profilePic||"/avatar.png",alt:"Profile",className:"size-32 rounded-full object-cover border-4 "}),(0,l.jsxs)("label",{htmlFor:"avatar-upload",className:"\n                  absolute bottom-0 right-0 \n                  bg-base-content hover:scale-105\n                  p-2 rounded-full cursor-pointer \n                  transition-all duration-200\n                  ".concat(u?"animate-pulse pointer-events-none":"","\n                "),children:[(0,l.jsx)(n,{className:"w-5 h-5 text-base-200"}),(0,l.jsx)("input",{type:"file",id:"avatar-upload",className:"hidden",accept:"image/*",onChange:y,disabled:u})]})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-400",children:u?"Uploading...":"Click the camera icon to update your photo"})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[(0,l.jsx)(i.A,{className:"w-4 h-4"}),"Full Name"]}),(0,l.jsx)("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:null==a?void 0:a.fullName})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[(0,l.jsx)(o.A,{className:"w-4 h-4"}),"Email Address"]}),(0,l.jsx)("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:null==a?void 0:a.email})]})]}),(0,l.jsxs)("div",{className:"mt-6 bg-base-300 rounded-xl p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-medium  mb-4",children:"Account Information"}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700",children:[(0,l.jsx)("span",{children:"Member Since"}),(0,l.jsx)("span",{children:null===(e=a.createdAt)||void 0===e?void 0:e.split("T")[0]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,l.jsx)("span",{children:"Account Status"}),(0,l.jsx)("span",{className:"text-green-500",children:"Active"})]})]})]})]})})})}},8162:(e,s,a)=>{"use strict";a.d(s,{F:()=>i,default:()=>o});var l=a(5155),t=a(7595);a(6046),a(5521);var c=a(2115),r=a(5037),n=a(1319);let i=(0,c.createContext)(),o=e=>{let{children:s}=e,[a,o]=(0,c.useState)(null),[d,u]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[x,m]=(0,c.useState)(!1),[y,v]=(0,c.useState)(!0),[f,g]=(0,c.useState)([]),[j,N]=(0,c.useState)(null),b=(0,c.useCallback)(async()=>{if(!(null==a?void 0:a._id)){console.error("No authUser or userId found");return}console.log("Connecting socket for user:",a._id);let e=(0,n.io)("http://localhost:5001",{query:{userId:a._id}});return e.on("connect",()=>{console.log("Socket connected:",e.id)}),e.on("connect_error",e=>{console.error("Socket connection error:",e)}),e.on("getOnlineUsers",e=>{console.log("Online users:",e),g(e)}),console.log(e),N(e),()=>{e.disconnect()}},[a]),A=async()=>{(null==j?void 0:j.connected)&&j.disconnect()},k=(0,c.useCallback)(async()=>{try{let e=await t.S.get("/auth/check");o(e.data)}catch(e){console.error("Auth check failed:",e),o(null)}finally{v(!1)}},[]),S=async e=>{u(!0);try{let s=await t.S.post("/auth/signup",e);o(s.data),console.log(s.data),r.Ay.success("Account created successfully!"),b()}catch(e){r.Ay.error("Signup failed")}finally{u(!1),console.log(a)}},w=async()=>{try{await t.S.post("/auth/logout"),o(null),r.Ay.success("Logged out successfully"),A()}catch(e){r.Ay.error(e.message)}},C=async e=>{p(!0);try{let s=await t.S.post("/auth/login",e);o(s.data),r.Ay.success("Logged in successfully"),b()}catch(e){r.Ay.error("Failed to login")}finally{p(!1)}},_=async e=>{m(!0);try{let s=await t.S.put("/auth/update-profile",e);o(s.data),r.Ay.success("Profile updated succesfully")}catch(e){var s,a;console.log("error in update profile:",e),r.Ay.error(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}finally{m(!1)}};return(0,c.useEffect)(()=>{(null==a?void 0:a._id)?b():A()},[a,b]),(0,l.jsx)(i.Provider,{value:{authUser:a,setAuthUser:o,isSigningUp:d,setIsSigningUp:u,isLoggingIn:h,setIsLoggingIn:p,isUpdatingProfile:x,setIsUpdatingProfile:m,isCheckingAuth:y,setIsCheckingAuth:v,checkAuth:k,signup:S,logout:w,login:C,updateProfile:_,onlineUsers:f,setOnlineUsers:g,connectSocket:b,socket:j,setSocket:N},children:s})}},7595:(e,s,a)=>{"use strict";a.d(s,{S:()=>l});let l=a(2651).A.create({baseURL:"http://localhost:5001/api",withCredentials:!0})},5548:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(4057).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2472:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(4057).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[150,441,517,358],()=>s(8297)),_N_E=e.O()}]);