(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1226:()=>{},4501:(e,s,t)=>{Promise.resolve().then(t.bind(t,5112))},5112:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(5155),l=t(8162),c=t(6046),n=t(2115),r=t(6822),i=t(5548),o=t(6152),d=t(7752),u=t(632),h=t(2783),m=t(8173),x=t.n(m),p=t(7179);let y=()=>{let{isCheckingAuth:e,authUser:s,checkAuth:t,login:m,isLoggingIn:y}=(0,n.useContext)(l.F),[f,g]=(0,n.useState)(!1),[v,b]=(0,n.useState)({email:"",password:""}),j=async e=>{e.preventDefault(),m(v)};return s&&(0,c.redirect)("/"),(0,a.jsxs)("div",{className:"h-screen grid lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"flex flex-col justify-center items-center p-6 sm:p-12",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 group",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20   transition-colors",children:(0,a.jsx)(r.A,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold mt-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-base-content/60",children:"Sign in to your account"})]})}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text font-medium",children:"Email"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-base-content/40"})}),(0,a.jsx)("input",{type:"email",className:"input input-bordered w-full pl-10",placeholder:"you@example.com",value:v.email,onChange:e=>b({...v,email:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text font-medium",children:"Password"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-base-content/40"})}),(0,a.jsx)("input",{type:f?"text":"password",className:"input input-bordered w-full pl-10",placeholder:"••••••••",value:v.password,onChange:e=>b({...v,password:e.target.value})}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!f),children:f?(0,a.jsx)(d.A,{className:"h-5 w-5 text-base-content/40"}):(0,a.jsx)(u.A,{className:"h-5 w-5 text-base-content/40"})})]})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary w-full",disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-5 w-5 animate-spin"}),"Loading..."]}):"Sign in"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-base-content/60",children:["Don't have an account?"," ",(0,a.jsx)(x(),{href:"/signup",className:"link link-primary",children:"Create account"})]})})]})}),(0,a.jsx)(p.A,{title:"Welcome back!",subtitle:"Sign in to continue your conversations and catch up with your messages."})]})}},7179:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155);let l=e=>{let{title:s,subtitle:t}=e;return(0,a.jsx)("div",{className:"hidden lg:flex items-center justify-center bg-base-200 p-12",children:(0,a.jsxs)("div",{className:"max-w-md text-center",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[...Array(9)].map((e,s)=>(0,a.jsx)("div",{className:"aspect-square rounded-2xl bg-primary/10 ".concat(s%2==0?"animate-pulse":"")},s))}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:s}),(0,a.jsx)("p",{className:"text-base-content/60",children:t})]})})}},8162:(e,s,t)=>{"use strict";t.d(s,{F:()=>i,default:()=>o});var a=t(5155),l=t(7595);t(6046),t(5521);var c=t(2115),n=t(5037),r=t(1319);let i=(0,c.createContext)(),o=e=>{let{children:s}=e,[t,o]=(0,c.useState)(null),[d,u]=(0,c.useState)(!1),[h,m]=(0,c.useState)(!1),[x,p]=(0,c.useState)(!1),[y,f]=(0,c.useState)(!0),[g,v]=(0,c.useState)([]),[b,j]=(0,c.useState)(null),N=(0,c.useCallback)(async()=>{if(!(null==t?void 0:t._id)){console.error("No authUser or userId found");return}console.log("Connecting socket for user:",t._id);let e=(0,r.io)("http://localhost:5001",{query:{userId:t._id}});return e.on("connect",()=>{console.log("Socket connected:",e.id)}),e.on("connect_error",e=>{console.error("Socket connection error:",e)}),e.on("getOnlineUsers",e=>{console.log("Online users:",e),v(e)}),console.log(e),j(e),()=>{e.disconnect()}},[t]),w=async()=>{(null==b?void 0:b.connected)&&b.disconnect()},A=(0,c.useCallback)(async()=>{try{let e=await l.S.get("/auth/check");o(e.data)}catch(e){console.error("Auth check failed:",e),o(null)}finally{f(!1)}},[]),k=async e=>{u(!0);try{let s=await l.S.post("/auth/signup",e);o(s.data),console.log(s.data),n.Ay.success("Account created successfully!"),N()}catch(e){n.Ay.error("Signup failed")}finally{u(!1),console.log(t)}},S=async()=>{try{await l.S.post("/auth/logout"),o(null),n.Ay.success("Logged out successfully"),w()}catch(e){n.Ay.error(e.message)}},C=async e=>{m(!0);try{let s=await l.S.post("/auth/login",e);o(s.data),n.Ay.success("Logged in successfully"),N()}catch(e){n.Ay.error("Failed to login")}finally{m(!1)}},_=async e=>{p(!0);try{let s=await l.S.put("/auth/update-profile",e);o(s.data),n.Ay.success("Profile updated succesfully")}catch(e){var s,t;console.log("error in update profile:",e),n.Ay.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}finally{p(!1)}};return(0,c.useEffect)(()=>{(null==t?void 0:t._id)?N():w()},[t,N]),(0,a.jsx)(i.Provider,{value:{authUser:t,setAuthUser:o,isSigningUp:d,setIsSigningUp:u,isLoggingIn:h,setIsLoggingIn:m,isUpdatingProfile:x,setIsUpdatingProfile:p,isCheckingAuth:y,setIsCheckingAuth:f,checkAuth:A,signup:k,logout:S,login:C,updateProfile:_,onlineUsers:g,setOnlineUsers:v,connectSocket:N,socket:b,setSocket:j},children:s})}},7595:(e,s,t)=>{"use strict";t.d(s,{S:()=>a});let a=t(2651).A.create({baseURL:"http://localhost:5001/api",withCredentials:!0})},7752:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},632:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2783:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6152:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},5548:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[150,474,441,517,358],()=>s(4501)),_N_E=e.O()}]);