{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/lib/axios.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nexport const axiosInstance = axios.create({\r\n    baseURL:\"http://localhost:5001/api\",\r\n    withCredentials:true \r\n})"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,gBAAgB,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACtC,SAAQ;IACR,iBAAgB;AACpB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/context/global.jsx"],"sourcesContent":["\"use client\";\r\nimport { axiosInstance } from \"@/lib/axios\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { Router } from \"next/navigation\";\r\nimport { useRouter } from \"next/router\";\r\nimport React, { createContext, useCallback, useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst BASE_URL = \"http://localhost:5001\";\r\n\r\nexport const GlobalContext = createContext();\r\n\r\nconst GlobalContextProvider = ({ children }) => {\r\n  const [authUser, setAuthUser] = useState(null);\r\n  const [isSigningUp, setIsSigningUp] = useState(false);\r\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\r\n  const [isUpdatingProfile, setIsUpdatingProfile] = useState(false);\r\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [socket, setSocket] = useState(null);\r\n\r\n  const connectSocket = useCallback(async () => {\r\n    if (!authUser?._id) {\r\n      console.error(\"No authUser or userId found\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"Connecting socket for user:\", authUser._id);\r\n\r\n    const socketIo = io(BASE_URL, {\r\n      query: {\r\n        userId: authUser._id,\r\n      },\r\n    });\r\n\r\n    socketIo.on(\"connect\", () => {\r\n      console.log(\"Socket connected:\", socketIo.id);\r\n    });\r\n\r\n    socketIo.on(\"connect_error\", (err) => {\r\n      console.error(\"Socket connection error:\", err);\r\n    });\r\n\r\n    socketIo.on(\"getOnlineUsers\", (usersIds) => {\r\n      console.log(\"Online users:\", usersIds);\r\n      setOnlineUsers(usersIds);\r\n    });\r\n    console.log(socketIo);\r\n    setSocket(socketIo); // Ensure this is called\r\n\r\n    return () => {\r\n      socketIo.disconnect();\r\n    };\r\n  }, [authUser]);\r\n  const dissconnectSocket = async () => {\r\n    if (socket?.connected) socket.disconnect();\r\n  };\r\n\r\n  const checkAuth = useCallback(async () => {\r\n    try {\r\n      const res = await axiosInstance.get(\"/auth/check\");\r\n\r\n      setAuthUser(res.data);\r\n    } catch (error) {\r\n      console.error(\"Auth check failed:\", error);\r\n      setAuthUser(null);\r\n    } finally {\r\n      setIsCheckingAuth(false);\r\n    }\r\n  }, []);\r\n  const signup = async (data) => {\r\n    setIsSigningUp(true);\r\n\r\n    try {\r\n      const res = await axiosInstance.post(\"/auth/signup\", data);\r\n      setAuthUser(res.data);\r\n      console.log(res.data);\r\n      toast.success(\"Account created successfully!\");\r\n      connectSocket();\r\n\r\n      // Move redirect inside the promise to ensure `authUser` is set\r\n    } catch (error) {\r\n      toast.error(\"Signup failed\");\r\n    } finally {\r\n      setIsSigningUp(false);\r\n      console.log(authUser);\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await axiosInstance.post(\"/auth/logout\");\r\n      setAuthUser(null);\r\n      toast.success(\"Logged out successfully\");\r\n      dissconnectSocket();\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n  const login = async (data) => {\r\n    setIsLoggingIn(true);\r\n    try {\r\n      const res = await axiosInstance.post(\"/auth/login\", data);\r\n      setAuthUser(res.data);\r\n      toast.success(\"Logged in successfully\");\r\n      connectSocket();\r\n    } catch (error) {\r\n      toast.error(\"Failed to login\");\r\n    } finally {\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (data) => {\r\n    setIsUpdatingProfile(true);\r\n    try {\r\n      const res = await axiosInstance.put(\"/auth/update-profile\", data);\r\n      setAuthUser(res.data);\r\n      toast.success(\"Profile updated succesfully\");\r\n    } catch (error) {\r\n      console.log(\"error in update profile:\", error);\r\n      toast.error(error?.response?.data?.message);\r\n    } finally {\r\n      setIsUpdatingProfile(false);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (authUser?._id) {\r\n      connectSocket();\r\n    } else {\r\n      dissconnectSocket();\r\n    }\r\n  }, [authUser, connectSocket]);\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        authUser,\r\n        setAuthUser,\r\n        isSigningUp,\r\n        setIsSigningUp,\r\n        isLoggingIn,\r\n        setIsLoggingIn,\r\n        isUpdatingProfile,\r\n        setIsUpdatingProfile,\r\n        isCheckingAuth,\r\n        setIsCheckingAuth,\r\n        checkAuth,\r\n        signup,\r\n        logout,\r\n        login,\r\n        updateProfile,\r\n        onlineUsers,\r\n        setOnlineUsers,\r\n        connectSocket,\r\n        socket,\r\n        setSocket,\r\n      }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GlobalContextProvider;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/components/Navbar.jsx"],"sourcesContent":["\"use client\";\r\nimport { GlobalContext } from \"@/context/global\";\r\nimport React, { useContext, useEffect } from \"react\";\r\n\r\nimport { LogOut, MessageSquare, Settings, User } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst Navbar = () => {\r\n  const { logout, authUser, checkAuth } = useContext(GlobalContext);\r\n\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  return (\r\n    <header\r\n      className=\"bg-base-100 border-b border-base-300 fixed w-full top-0 z-40 \r\n    backdrop-blur-lg bg-base-100/80\"\r\n    >\r\n      <div className=\"container mx-auto px-4 h-16\">\r\n        <div className=\"flex items-center justify-between h-full\">\r\n          <div className=\"flex items-center gap-8\">\r\n            <Link\r\n              href=\"/\"\r\n              className=\"flex items-center gap-2.5 hover:opacity-80 transition-all\"\r\n            >\r\n              <div className=\"size-9 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                <MessageSquare className=\"w-5 h-5 text-primary\" />\r\n              </div>\r\n              <h1 className=\"text-lg font-bold\">Drogovori</h1>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <Link\r\n              href={\"/settings\"}\r\n              className={`\r\n              btn btn-sm gap-2 transition-colors\r\n              \r\n              `}\r\n            >\r\n              <Settings className=\"w-4 h-4\" />\r\n              <span className=\"hidden sm:inline\">Settings</span>\r\n            </Link>\r\n\r\n            {authUser && (\r\n              <>\r\n                <Link href={\"/profile\"} className={`btn btn-sm gap-2`}>\r\n                  <User className=\"size-5\" />\r\n                  <span className=\"hidden sm:inline\">Profile</span>\r\n                </Link>\r\n\r\n                <button className=\"flex gap-2 items-center\" onClick={logout}>\r\n                  <LogOut className=\"size-5\" />\r\n                  <span className=\"hidden sm:inline\">Logout</span>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAGA;AACA;AAFA;AAAA;AAAA;AAAA;;;AAJA;;;;;;AAQA,MAAM,SAAS;;IACb,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,qHAAA,CAAA,gBAAa;IAEhE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACR;QACF;2BAAG,EAAE;IAEL,qBACE,6LAAC;QACC,WAAU;kBAGV,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2NAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,6LAAC;oCAAG,WAAU;8CAAoB;;;;;;;;;;;;;;;;;kCAItC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+JAAA,CAAA,UAAI;gCACH,MAAM;gCACN,WAAW,CAAC;;;cAGZ,CAAC;;kDAED,6LAAC,6MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,6LAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;4BAGpC,0BACC;;kDACE,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAM;wCAAY,WAAW,CAAC,gBAAgB,CAAC;;0DACnD,6LAAC,qMAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;0DAChB,6LAAC;gDAAK,WAAU;0DAAmB;;;;;;;;;;;;kDAGrC,6LAAC;wCAAO,WAAU;wCAA0B,SAAS;;0DACnD,6LAAC,6MAAA,CAAA,SAAM;gDAAC,WAAU;;;;;;0DAClB,6LAAC;gDAAK,WAAU;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrD;GAzDM;;QAGW,qIAAA,CAAA,YAAS;;;KAHpB;uCA2DS"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/context/theme.jsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useEffect, useState } from \"react\";\r\n\r\nexport const ThemeContext = createContext();\r\n\r\nconst ThemeContextProvider = ({ children }) => {\r\n  const [theme, setTheme] = useState(\"light\");\r\n  useEffect(() => {\r\n    // Check localStorage only on the client side\r\n    const storedTheme = localStorage.getItem(\"chat-theme\");\r\n    if (storedTheme) {\r\n      setTheme(storedTheme);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Save theme to localStorage whenever it changes\r\n    localStorage.setItem(\"chat-theme\", theme);\r\n  }, [theme]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, setTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ThemeContextProvider;\r\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAGO,MAAM,6BAAe,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAExC,MAAM,uBAAuB,CAAC,EAAE,QAAQ,EAAE;;IACxC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,6CAA6C;YAC7C,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,IAAI,aAAa;gBACf,SAAS;YACX;QACF;yCAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,iDAAiD;YACjD,aAAa,OAAO,CAAC,cAAc;QACrC;yCAAG;QAAC;KAAM;IAEV,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAS;kBAC7C;;;;;;AAGP;GApBM;KAAA;uCAsBS"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/components/ThemeWrapper.jsx"],"sourcesContent":["\"use client\"; // This ensures `useContext` works!\r\n\r\nimport { useContext } from \"react\";\r\nimport { ThemeContext } from \"@/context/theme\";\r\n\r\nexport default function ThemeWrapper({ children }) {\r\n  const { theme } = useContext(ThemeContext);\r\n\r\n  return (\r\n    <div data-theme={theme} className=\"w-full h-full\">\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA,cAAc,mCAAmC;;;AAKlC,SAAS,aAAa,EAAE,QAAQ,EAAE;;IAC/C,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,oHAAA,CAAA,eAAY;IAEzC,qBACE,6LAAC;QAAI,cAAY;QAAO,WAAU;kBAC/B;;;;;;AAGP;GARwB;KAAA"}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/dange/Desktop/chat-app/frontend/context/chat.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useCallback, useContext, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { axiosInstance } from \"@/lib/axios\";\r\nimport { GlobalContext } from \"./global\";\r\n\r\nexport const ChatContext = createContext();\r\nconst ChatContextProvider = ({ children }) => {\r\n  const { socket } = useContext(GlobalContext);\r\n  const [chat, setChat] = useState();\r\n  const [messages, setMessages] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [isUsersLoading, setIsUsersLoading] = useState(false);\r\n  const [isMessagesLoading, setIsMessagesLoading] = useState(false);\r\n  console.log(socket);\r\n\r\n  const getUsers = useCallback(async () => {\r\n    setIsUsersLoading(true);\r\n    try {\r\n      const res = await axiosInstance.get(\"/messages/users\");\r\n      setUsers(res.data);\r\n    } catch (error) {\r\n      toast.error(error?.response?.data?.message || \"Failed to fetch users\");\r\n    } finally {\r\n      setIsUsersLoading(false);\r\n    }\r\n  }, []);\r\n  const getMessages = useCallback(async (userId) => {\r\n    setIsMessagesLoading(true);\r\n    try {\r\n      const res = await axiosInstance.get(`/messages/${userId}`);\r\n      setMessages(res.data);\r\n    } catch (error) {\r\n      toast.error(error?.response?.data?.message);\r\n    } finally {\r\n      setIsMessagesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const sendMessage = useCallback(\r\n    async (data) => {\r\n      console.log(selectedUser);\r\n      try {\r\n        const res = await axiosInstance.post(\r\n          `/messages/send/${selectedUser._id}`,\r\n          data\r\n        );\r\n        setMessages((prev) => [...prev, res.data]);\r\n      } catch (error) {\r\n        toast.error(\"Failed to send message\");\r\n      }\r\n    },\r\n    [selectedUser]\r\n  );\r\n  const subscribeToMessages = useCallback(() => {\r\n    if (!socket || !selectedUser) {\r\n      console.error(\"no socket found\");\r\n      return;\r\n    }\r\n\r\n    socket?.on(\"newMessage\", (newMessage) => {\r\n      if (newMessage.senderId !== selectedUser._id)\r\n        console.log(\"received msg:\", newMessage);\r\n      setMessages((prev) => [...prev, newMessage]);\r\n    });\r\n  }, [socket, selectedUser]);\r\n  const unsubscribeToMessages = useCallback(() => {\r\n    socket?.off(\"newMessage\");\r\n  }, [socket, selectedUser]);\r\n\r\n  return (\r\n    <ChatContext.Provider\r\n      value={{\r\n        chat,\r\n        setChat,\r\n        messages,\r\n        setMessages,\r\n        users,\r\n        setUsers,\r\n        selectedUser,\r\n        setSelectedUser,\r\n        isUsersLoading,\r\n        setIsUsersLoading,\r\n        isMessagesLoading,\r\n        setIsMessagesLoading,\r\n        getMessages,\r\n        getUsers,\r\n        sendMessage,\r\n        subscribeToMessages,\r\n        unsubscribeToMessages,\r\n      }}\r\n    >\r\n      {children}\r\n    </ChatContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ChatContextProvider;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 652, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}